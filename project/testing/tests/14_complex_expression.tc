// TINYC TEST
// INFO: Complex nested expressions and operator precedence
// RUN: parser
// EXPECT: SUCCESS
// RESULT: {"nodeType":"Program","declarations":[{"nodeType":"FunctionDefinition","identifier":"add","returnType":{"nodeType":"PrimitiveType","kind":"int","location":{"filename":"./tests/14_complex_expression.tc","line":7,"column":1}},"parameters":[{"nodeType":"Parameter","identifier":"a","type":{"nodeType":"PrimitiveType","kind":"int","location":{"filename":"./tests/14_complex_expression.tc","line":7,"column":9}},"location":{"filename":"./tests/14_complex_expression.tc","line":7,"column":13}},{"nodeType":"Parameter","identifier":"b","type":{"nodeType":"PrimitiveType","kind":"int","location":{"filename":"./tests/14_complex_expression.tc","line":7,"column":16}},"location":{"filename":"./tests/14_complex_expression.tc","line":7,"column":20}}],"body":{"nodeType":"BlockStatement","statements":[{"nodeType":"ReturnStatement","expression":{"nodeType":"BinaryExpression","operator":"+","left":{"nodeType":"Identifier","identifier":"a","location":{"filename":"./tests/14_complex_expression.tc","line":8,"column":12}},"right":{"nodeType":"Identifier","identifier":"b","location":{"filename":"./tests/14_complex_expression.tc","line":8,"column":16}},"location":{"filename":"./tests/14_complex_expression.tc","line":8,"column":12}},"location":{"filename":"./tests/14_complex_expression.tc","line":8,"column":5}}],"location":{"filename":"./tests/14_complex_expression.tc","line":7,"column":23}},"location":{"filename":"./tests/14_complex_expression.tc","line":7,"column":5}},{"nodeType":"FunctionDefinition","identifier":"main","returnType":{"nodeType":"PrimitiveType","kind":"int","location":{"filename":"./tests/14_complex_expression.tc","line":11,"column":1}},"parameters":[],"body":{"nodeType":"BlockStatement","statements":[{"nodeType":"ExpressionStatement","expression":{"nodeType":"VariableDeclaration","identifier":"a","type":{"nodeType":"PrimitiveType","kind":"int","location":{"filename":"./tests/14_complex_expression.tc","line":12,"column":5}},"initializer":{"nodeType":"Literal","kind":"integer","value":5,"location":{"filename":"./tests/14_complex_expression.tc","line":12,"column":13}},"location":{"filename":"./tests/14_complex_expression.tc","line":12,"column":9}},"location":{"filename":"./tests/14_complex_expression.tc","line":12,"column":9}},{"nodeType":"ExpressionStatement","expression":{"nodeType":"VariableDeclaration","identifier":"b","type":{"nodeType":"PrimitiveType","kind":"int","location":{"filename":"./tests/14_complex_expression.tc","line":13,"column":5}},"initializer":{"nodeType":"Literal","kind":"integer","value":10,"location":{"filename":"./tests/14_complex_expression.tc","line":13,"column":13}},"location":{"filename":"./tests/14_complex_expression.tc","line":13,"column":9}},"location":{"filename":"./tests/14_complex_expression.tc","line":13,"column":9}},{"nodeType":"ExpressionStatement","expression":{"nodeType":"VariableDeclaration","identifier":"c","type":{"nodeType":"PrimitiveType","kind":"int","location":{"filename":"./tests/14_complex_expression.tc","line":14,"column":5}},"initializer":{"nodeType":"Literal","kind":"integer","value":15,"location":{"filename":"./tests/14_complex_expression.tc","line":14,"column":13}},"location":{"filename":"./tests/14_complex_expression.tc","line":14,"column":9}},"location":{"filename":"./tests/14_complex_expression.tc","line":14,"column":9}},{"nodeType":"ExpressionStatement","expression":{"nodeType":"VariableDeclaration","identifier":"arr","type":{"nodeType":"PrimitiveType","kind":"int","location":{"filename":"./tests/14_complex_expression.tc","line":15,"column":5}},"arraySize":{"nodeType":"Literal","kind":"integer","value":5,"location":{"filename":"./tests/14_complex_expression.tc","line":15,"column":13}},"location":{"filename":"./tests/14_complex_expression.tc","line":15,"column":9}},"location":{"filename":"./tests/14_complex_expression.tc","line":15,"column":9}},{"nodeType":"ExpressionStatement","expression":{"nodeType":"VariableDeclaration","identifier":"result","type":{"nodeType":"PrimitiveType","kind":"int","location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":5}},"initializer":{"nodeType":"BinaryExpression","operator":"+","left":{"nodeType":"CallExpression","callee":{"nodeType":"Identifier","identifier":"add","location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":18}},"arguments":[{"nodeType":"BinaryExpression","operator":"*","left":{"nodeType":"Identifier","identifier":"a","location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":22}},"right":{"nodeType":"Literal","kind":"integer","value":2,"location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":26}},"location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":22}},{"nodeType":"BinaryExpression","operator":"/","left":{"nodeType":"Identifier","identifier":"b","location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":29}},"right":{"nodeType":"Literal","kind":"integer","value":2,"location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":33}},"location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":29}}],"location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":18}},"right":{"nodeType":"BinaryExpression","operator":"%","left":{"nodeType":"Identifier","identifier":"c","location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":39}},"right":{"nodeType":"Literal","kind":"integer","value":7,"location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":43}},"location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":39}},"location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":18}},"location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":9}},"location":{"filename":"./tests/14_complex_expression.tc","line":18,"column":9}},{"nodeType":"ExpressionStatement","expression":{"nodeType":"VariableDeclaration","identifier":"ch","type":{"nodeType":"PrimitiveType","kind":"char","location":{"filename":"./tests/14_complex_expression.tc","line":20,"column":5}},"initializer":{"nodeType":"Literal","kind":"char","value":"c","location":{"filename":"./tests/14_complex_expression.tc","line":20,"column":16}},"location":{"filename":"./tests/14_complex_expression.tc","line":20,"column":10}},"location":{"filename":"./tests/14_complex_expression.tc","line":20,"column":10}},{"nodeType":"ExpressionStatement","expression":{"nodeType":"BinaryExpression","operator":"=","left":{"nodeType":"IndexExpression","array":{"nodeType":"Identifier","identifier":"arr","location":{"filename":"./tests/14_complex_expression.tc","line":23,"column":5}},"index":{"nodeType":"CallExpression","callee":{"nodeType":"Identifier","identifier":"add","location":{"filename":"./tests/14_complex_expression.tc","line":23,"column":9}},"arguments":[{"nodeType":"Literal","kind":"integer","value":1,"location":{"filename":"./tests/14_complex_expression.tc","line":23,"column":13}},{"nodeType":"Literal","kind":"integer","value":2,"location":{"filename":"./tests/14_complex_expression.tc","line":23,"column":16}}],"location":{"filename":"./tests/14_complex_expression.tc","line":23,"column":9}},"location":{"filename":"./tests/14_complex_expression.tc","line":23,"column":5}},"right":{"nodeType":"BinaryExpression","operator":"+","left":{"nodeType":"Identifier","identifier":"a","location":{"filename":"./tests/14_complex_expression.tc","line":23,"column":22}},"right":{"nodeType":"BinaryExpression","operator":"*","left":{"nodeType":"Identifier","identifier":"b","location":{"filename":"./tests/14_complex_expression.tc","line":23,"column":26}},"right":{"nodeType":"Identifier","identifier":"c","location":{"filename":"./tests/14_complex_expression.tc","line":23,"column":30}},"location":{"filename":"./tests/14_complex_expression.tc","line":23,"column":26}},"location":{"filename":"./tests/14_complex_expression.tc","line":23,"column":22}},"location":{"filename":"./tests/14_complex_expression.tc","line":23,"column":5}},"location":{"filename":"./tests/14_complex_expression.tc","line":23,"column":5}},{"nodeType":"ExpressionStatement","expression":{"nodeType":"BinaryExpression","operator":"=","left":{"nodeType":"Identifier","identifier":"result","location":{"filename":"./tests/14_complex_expression.tc","line":26,"column":5}},"right":{"nodeType":"BinaryExpression","operator":"+","left":{"nodeType":"BinaryExpression","operator":"+","left":{"nodeType":"Identifier","identifier":"result","location":{"filename":"./tests/14_complex_expression.tc","line":26,"column":14}},"right":{"nodeType":"BinaryExpression","operator":"*","left":{"nodeType":"Identifier","identifier":"a","location":{"filename":"./tests/14_complex_expression.tc","line":26,"column":23}},"right":{"nodeType":"Identifier","identifier":"b","location":{"filename":"./tests/14_complex_expression.tc","line":26,"column":27}},"location":{"filename":"./tests/14_complex_expression.tc","line":26,"column":23}},"location":{"filename":"./tests/14_complex_expression.tc","line":26,"column":14}},"right":{"nodeType":"BinaryExpression","operator":"/","left":{"nodeType":"Identifier","identifier":"c","location":{"filename":"./tests/14_complex_expression.tc","line":26,"column":31}},"right":{"nodeType":"Literal","kind":"integer","value":2,"location":{"filename":"./tests/14_complex_expression.tc","line":26,"column":35}},"location":{"filename":"./tests/14_complex_expression.tc","line":26,"column":31}},"location":{"filename":"./tests/14_complex_expression.tc","line":26,"column":14}},"location":{"filename":"./tests/14_complex_expression.tc","line":26,"column":5}},"location":{"filename":"./tests/14_complex_expression.tc","line":26,"column":5}},{"nodeType":"ExpressionStatement","expression":{"nodeType":"VariableDeclaration","identifier":"val","type":{"nodeType":"PrimitiveType","kind":"int","location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":5}},"initializer":{"nodeType":"BinaryExpression","operator":"+","left":{"nodeType":"BinaryExpression","operator":"/","left":{"nodeType":"BinaryExpression","operator":"*","left":{"nodeType":"BinaryExpression","operator":"+","left":{"nodeType":"Identifier","identifier":"a","location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":17}},"right":{"nodeType":"Identifier","identifier":"b","location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":21}},"location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":17}},"right":{"nodeType":"Identifier","identifier":"c","location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":26}},"location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":17}},"right":{"nodeType":"BinaryExpression","operator":"-","left":{"nodeType":"Identifier","identifier":"a","location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":32}},"right":{"nodeType":"Literal","kind":"integer","value":1,"location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":36}},"location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":32}},"location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":17}},"right":{"nodeType":"CallExpression","callee":{"nodeType":"Identifier","identifier":"add","location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":41}},"arguments":[{"nodeType":"Identifier","identifier":"a","location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":45}},{"nodeType":"Identifier","identifier":"b","location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":48}}],"location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":41}},"location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":17}},"location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":9}},"location":{"filename":"./tests/14_complex_expression.tc","line":29,"column":9}},{"nodeType":"ReturnStatement","expression":{"nodeType":"Literal","kind":"integer","value":0,"location":{"filename":"./tests/14_complex_expression.tc","line":31,"column":12}},"location":{"filename":"./tests/14_complex_expression.tc","line":31,"column":5}}],"location":{"filename":"./tests/14_complex_expression.tc","line":11,"column":12}},"location":{"filename":"./tests/14_complex_expression.tc","line":11,"column":5}}],"location":{"filename":"./tests/14_complex_expression.tc","line":0,"column":0}}

int add(int a, int b) {
    return a + b;
}

int main() {
    int a = 5;
    int b = 10;
    int c = 15;
    int arr[5];

    // Nested expressions with function calls
    int result = add(a * 2, b / 2) + (c % 7);

    char ch = ('c');

    // Complex array indexing
    arr[add(1, 2)] = a + b * c;

    // Complex assignment
    result = result + a * b + c / 2;

    // Compound arithmetic
    int val = ((a + b) * c) / (a - 1) + add(a, b);

    return 0;
}